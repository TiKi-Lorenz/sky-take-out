<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sky.mapper.EmployeeMapper">

    <select id="pageQuery" resultType="com.sky.entity.Employee">
        SELECT * FROM employee
        <where>
            <if test="name != null and name != ''">
#                 动态查询如果 where 中的第一个条件以 and 开头，MyBatis 会自动去掉多余的 and，确保生成的 SQL 语句是合法的。
                and name like concat('%', #{name}, '%')
            </if>
        </where>
    # 根据创建时间降序排序
        order by create_time desc
    </select>
    <!--下面申明了一个修改操作，只要是修改类都可以用这个修改操作，不论修改的是员工的哪个属性-->
    <update id="update" parameterType="Employee">
        update employee
        <set>
            <if test ="name != null ">name = #{name},</if>
            <if test ="username != null">username = #{username},</if>
            <if test ="password != null ">password = #{password},</if>
            <if test ="phone != null ">phone = #{phone},</if>
            <if test ="sex != null ">sex = #{sex},</if>
            <if test ="idNumber != null ">id_Number= #{idNumber},</if>
            <if test ="updateTime != null ">update_Time = #{updateTime},</if>
            <if test ="updateUser != null ">update_User = #{updateUser},</if>
            <if test ="status != null ">status = #{status},</if>
        </set>
        where id = #{id}
    </update>
<!--    ParameterType 属性是 MyBatis 中用来指定传递给 SQL 语句的参数类型的-->
</mapper>
